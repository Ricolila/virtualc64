\doxysection{CIA.\+h}
\hypertarget{_c_i_a_8h_source}{}\label{_c_i_a_8h_source}\index{/Users/hoff/Retro/virtualc64/Emulator/Components/CIA/CIA.h@{/Users/hoff/Retro/virtualc64/Emulator/Components/CIA/CIA.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00002\ \textcolor{comment}{//\ This\ file\ is\ part\ of\ VirtualC64}}
\DoxyCodeLine{00003\ \textcolor{comment}{//}}
\DoxyCodeLine{00004\ \textcolor{comment}{//\ Copyright\ (C)\ Dirk\ W.\ Hoffmann.\ www.dirkwhoffmann.de}}
\DoxyCodeLine{00005\ \textcolor{comment}{//\ This\ FILE\ is\ dual-\/licensed.\ You\ are\ free\ to\ choose\ between:}}
\DoxyCodeLine{00006\ \textcolor{comment}{//}}
\DoxyCodeLine{00007\ \textcolor{comment}{//\ \ \ \ \ -\/\ The\ GNU\ General\ Public\ License\ v3\ (or\ any\ later\ version)}}
\DoxyCodeLine{00008\ \textcolor{comment}{//\ \ \ \ \ -\/\ The\ Mozilla\ Public\ License\ v2}}
\DoxyCodeLine{00009\ \textcolor{comment}{//}}
\DoxyCodeLine{00010\ \textcolor{comment}{//\ SPDX-\/License-\/Identifier:\ GPL-\/3.0-\/or-\/later\ OR\ MPL-\/2.0}}
\DoxyCodeLine{00011\ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00012\ }
\DoxyCodeLine{00013\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00014\ }
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#include\ "{}CIATypes.h"{}}}
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#include\ "{}C64Types.h"{}}}
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#include\ "{}SubComponent.h"{}}}
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#include\ "{}TOD.h"{}}}
\DoxyCodeLine{00019\ }
\DoxyCodeLine{00020\ \textcolor{keyword}{namespace\ }vc64\ \{}
\DoxyCodeLine{00021\ }
\DoxyCodeLine{00022\ \textcolor{keyword}{class\ }CIA\ :\ \textcolor{keyword}{public}\ SubComponent,\ \textcolor{keyword}{public}\ Inspectable<CIAInfo,\ CIAStats>\ \{}
\DoxyCodeLine{00023\ }
\DoxyCodeLine{00024\ \ \ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }TOD;}
\DoxyCodeLine{00025\ \ \ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }ParCable;}
\DoxyCodeLine{00026\ }
\DoxyCodeLine{00027\ \ \ \ \ ConfigOptions\ options\ =\ \{}
\DoxyCodeLine{00028\ }
\DoxyCodeLine{00029\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_option_types_8h_a273e435dabd576e6dcff3f18024d1fa8a8bb0c2ecce66bfb081d124050f073eb6}{OPT\_CIA\_REVISION}},}
\DoxyCodeLine{00030\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_option_types_8h_a273e435dabd576e6dcff3f18024d1fa8a6ce90fc1a6c346d244fc12f85bfff997}{OPT\_CIA\_TIMER\_B\_BUG}}}
\DoxyCodeLine{00031\ \ \ \ \ \};}
\DoxyCodeLine{00032\ }
\DoxyCodeLine{00033\ }
\DoxyCodeLine{00034\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00035\ \ \ \ \ \textcolor{comment}{//\ Action\ flags}}
\DoxyCodeLine{00036\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00037\ \ \ \ \ }
\DoxyCodeLine{00038\ \ \ \ \ \textcolor{comment}{//\ Decrements\ timer\ A}}
\DoxyCodeLine{00039\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ u64\ CIACountA0\ =\ \ \ (1ULL\ <<\ 0);}
\DoxyCodeLine{00040\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ u64\ CIACountA1\ =\ \ \ (1ULL\ <<\ 1);}
\DoxyCodeLine{00041\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ u64\ CIACountA2\ =\ \ \ (1ULL\ <<\ 2);}
\DoxyCodeLine{00042\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ u64\ CIACountA3\ =\ \ \ (1ULL\ <<\ 3);}
\DoxyCodeLine{00043\ \ \ \ \ }
\DoxyCodeLine{00044\ \ \ \ \ \textcolor{comment}{//\ Decrements\ timer\ B}}
\DoxyCodeLine{00045\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ u64\ CIACountB0\ =\ \ \ (1ULL\ <<\ 4);}
\DoxyCodeLine{00046\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ u64\ CIACountB1\ =\ \ \ (1ULL\ <<\ 5);}
\DoxyCodeLine{00047\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ u64\ CIACountB2\ =\ \ \ (1ULL\ <<\ 6);}
\DoxyCodeLine{00048\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ u64\ CIACountB3\ =\ \ \ (1ULL\ <<\ 7);}
\DoxyCodeLine{00049\ \ \ \ \ }
\DoxyCodeLine{00050\ \ \ \ \ \textcolor{comment}{//\ Loads\ timer\ A}}
\DoxyCodeLine{00051\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ u64\ CIALoadA0\ =\ \ \ \ (1ULL\ <<\ 8);}
\DoxyCodeLine{00052\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ u64\ CIALoadA1\ =\ \ \ \ (1ULL\ <<\ 9);}
\DoxyCodeLine{00053\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ u64\ CIALoadA2\ =\ \ \ \ (1ULL\ <<\ 10);}
\DoxyCodeLine{00054\ \ \ \ \ }
\DoxyCodeLine{00055\ \ \ \ \ \textcolor{comment}{//\ Loads\ timer\ B}}
\DoxyCodeLine{00056\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ u64\ CIALoadB0\ =\ \ \ \ (1ULL\ <<\ 11);}
\DoxyCodeLine{00057\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ u64\ CIALoadB1\ =\ \ \ \ (1ULL\ <<\ 12);}
\DoxyCodeLine{00058\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ u64\ CIALoadB2\ =\ \ \ \ (1ULL\ <<\ 13);}
\DoxyCodeLine{00059\ \ \ \ \ }
\DoxyCodeLine{00060\ \ \ \ \ \textcolor{comment}{//\ Sets\ pin\ PB6\ low}}
\DoxyCodeLine{00061\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ u64\ CIAPB6Low0\ =\ \ \ (1ULL\ <<\ 14);}
\DoxyCodeLine{00062\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ u64\ CIAPB6Low1\ =\ \ \ (1ULL\ <<\ 15);}
\DoxyCodeLine{00063\ \ \ \ \ }
\DoxyCodeLine{00064\ \ \ \ \ \textcolor{comment}{//\ Sets\ pin\ PB7\ low}}
\DoxyCodeLine{00065\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ u64\ CIAPB7Low0\ =\ \ \ (1ULL\ <<\ 16);}
\DoxyCodeLine{00066\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ u64\ CIAPB7Low1\ =\ \ \ (1ULL\ <<\ 17);}
\DoxyCodeLine{00067\ \ \ \ \ }
\DoxyCodeLine{00068\ \ \ \ \ \textcolor{comment}{//\ Triggers\ an\ interrupt}}
\DoxyCodeLine{00069\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ u64\ CIASetInt0\ =\ \ \ (1ULL\ <<\ 18);}
\DoxyCodeLine{00070\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ u64\ CIASetInt1\ =\ \ \ (1ULL\ <<\ 19);}
\DoxyCodeLine{00071\ \ \ \ \ }
\DoxyCodeLine{00072\ \ \ \ \ \textcolor{comment}{//\ Releases\ the\ interrupt\ line}}
\DoxyCodeLine{00073\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ u64\ CIAClearInt0\ =\ (1ULL\ <<\ 20);}
\DoxyCodeLine{00074\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ u64\ CIAOneShotA0\ =\ (1ULL\ <<\ 21);}
\DoxyCodeLine{00075\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ u64\ CIAOneShotB0\ =\ (1ULL\ <<\ 22);}
\DoxyCodeLine{00076\ \ \ \ \ }
\DoxyCodeLine{00077\ \ \ \ \ \textcolor{comment}{//\ Indicates\ that\ ICR\ was\ read\ recently}}
\DoxyCodeLine{00078\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ u64\ CIAReadIcr0\ =\ \ (1ULL\ <<\ 23);}
\DoxyCodeLine{00079\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ u64\ CIAReadIcr1\ =\ \ (1ULL\ <<\ 24);}
\DoxyCodeLine{00080\ \ \ \ \ }
\DoxyCodeLine{00081\ \ \ \ \ \textcolor{comment}{//\ Clears\ bit\ 8\ in\ ICR\ register}}
\DoxyCodeLine{00082\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ u64\ CIAClearIcr0\ =\ (1ULL\ <<\ 25);}
\DoxyCodeLine{00083\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ u64\ CIAClearIcr1\ =\ (1ULL\ <<\ 26);}
\DoxyCodeLine{00084\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ u64\ CIAClearIcr2\ =\ (1ULL\ <<\ 27);}
\DoxyCodeLine{00085\ \ \ \ \ }
\DoxyCodeLine{00086\ \ \ \ \ \textcolor{comment}{//\ Clears\ bit\ 0\ -\/\ 7\ in\ ICR\ register}}
\DoxyCodeLine{00087\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ u64\ CIAAckIcr0\ =\ \ \ (1ULL\ <<\ 28);}
\DoxyCodeLine{00088\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ u64\ CIAAckIcr1\ =\ \ \ (1ULL\ <<\ 29);}
\DoxyCodeLine{00089\ \ \ \ \ }
\DoxyCodeLine{00090\ \ \ \ \ \textcolor{comment}{//\ Sets\ bit\ 8\ in\ ICR\ register}}
\DoxyCodeLine{00091\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ u64\ CIASetIcr0\ =\ \ \ (1ULL\ <<\ 30);}
\DoxyCodeLine{00092\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ u64\ CIASetIcr1\ =\ \ \ (1ULL\ <<\ 31);}
\DoxyCodeLine{00093\ \ \ \ \ }
\DoxyCodeLine{00094\ \ \ \ \ \textcolor{comment}{//\ Triggers\ an\ IRQ\ with\ TOD\ as\ source}}
\DoxyCodeLine{00095\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ u64\ CIATODInt0\ =\ \ \ (1ULL\ <<\ 32);}
\DoxyCodeLine{00096\ \ \ \ \ }
\DoxyCodeLine{00097\ \ \ \ \ \textcolor{comment}{//\ Triggers\ an\ IRQ\ with\ serial\ reg\ as\ source}}
\DoxyCodeLine{00098\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ u64\ CIASerInt0\ =\ \ \ (1ULL\ <<\ 33);}
\DoxyCodeLine{00099\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ u64\ CIASerInt1\ =\ \ \ (1ULL\ <<\ 34);}
\DoxyCodeLine{00100\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ u64\ CIASerInt2\ =\ \ \ (1ULL\ <<\ 35);}
\DoxyCodeLine{00101\ \ \ \ \ }
\DoxyCodeLine{00102\ \ \ \ \ \textcolor{comment}{//\ Loads\ the\ serial\ shift\ register}}
\DoxyCodeLine{00103\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ u64\ CIASerLoad0\ =\ \ (1ULL\ <<\ 36);}
\DoxyCodeLine{00104\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ u64\ CIASerLoad1\ =\ \ (1ULL\ <<\ 37);}
\DoxyCodeLine{00105\ \ \ \ \ }
\DoxyCodeLine{00106\ \ \ \ \ \textcolor{comment}{//\ Clock\ signal\ driving\ the\ serial\ register}}
\DoxyCodeLine{00107\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ u64\ CIASerClk0\ =\ \ \ (1ULL\ <<\ 38);}
\DoxyCodeLine{00108\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ u64\ CIASerClk1\ =\ \ \ (1ULL\ <<\ 39);}
\DoxyCodeLine{00109\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ u64\ CIASerClk2\ =\ \ \ (1ULL\ <<\ 40);}
\DoxyCodeLine{00110\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ u64\ CIASerClk3\ =\ \ \ (1ULL\ <<\ 41);}
\DoxyCodeLine{00111\ \ \ \ \ }
\DoxyCodeLine{00112\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ u64\ CIALast\ =\ \ \ \ \ \ (1ULL\ <<\ 42);}
\DoxyCodeLine{00113\ \ \ \ \ }
\DoxyCodeLine{00114\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ u64\ CIADelayMask\ =\ \string~CIALast}
\DoxyCodeLine{00115\ \ \ \ \ \&\ \string~CIACountA0\ \&\ \string~CIACountB0\ \&\ \string~CIALoadA0\ \&\ \string~CIALoadB0\ \&\ \string~CIAPB6Low0}
\DoxyCodeLine{00116\ \ \ \ \ \&\ \string~CIAPB7Low0\ \&\ \string~CIASetInt0\ \&\ \string~CIAClearInt0\ \&\ \string~CIAOneShotA0\ \&\ \string~CIAOneShotB0}
\DoxyCodeLine{00117\ \ \ \ \ \&\ \string~CIAReadIcr0\ \&\ \string~CIAClearIcr0\ \&\ \string~CIAAckIcr0\ \&\ \string~CIASetIcr0\ \&\ \string~CIATODInt0}
\DoxyCodeLine{00118\ \ \ \ \ \&\ \string~CIASerInt0\ \&\ \string~CIASerLoad0\ \&\ \string~CIASerClk0;}
\DoxyCodeLine{00119\ }
\DoxyCodeLine{00120\ \ \ \ \ \textcolor{comment}{//\ Current\ configuration}}
\DoxyCodeLine{00121\ \ \ \ \ CIAConfig\ config\ =\ \{\ \};}
\DoxyCodeLine{00122\ }
\DoxyCodeLine{00123\ \ \ \ \ }
\DoxyCodeLine{00124\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00125\ \ \ \ \ \textcolor{comment}{//\ Sub\ components}}
\DoxyCodeLine{00126\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00127\ \ \ \ \ }
\DoxyCodeLine{00128\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00129\ \ \ \ \ }
\DoxyCodeLine{00130\ \ \ \ \ TOD\ tod\ =\ TOD(c64,\ *\textcolor{keyword}{this});}
\DoxyCodeLine{00131\ \ \ \ \ }
\DoxyCodeLine{00132\ \ \ \ \ }
\DoxyCodeLine{00133\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00134\ \ \ \ \ \textcolor{comment}{//\ Internals}}
\DoxyCodeLine{00135\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00136\ }
\DoxyCodeLine{00137\ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00138\ \ \ \ \ }
\DoxyCodeLine{00139\ \ \ \ \ \textcolor{comment}{//\ Timer\ A\ counter}}
\DoxyCodeLine{00140\ \ \ \ \ u16\ counterA;}
\DoxyCodeLine{00141\ \ \ \ \ }
\DoxyCodeLine{00142\ \ \ \ \ \textcolor{comment}{//\ Timer\ B\ counter}}
\DoxyCodeLine{00143\ \ \ \ \ u16\ counterB;}
\DoxyCodeLine{00144\ }
\DoxyCodeLine{00145\ \ \ \ \ \textcolor{comment}{//\ Timer\ A\ latch}}
\DoxyCodeLine{00146\ \ \ \ \ u16\ latchA;}
\DoxyCodeLine{00147\ \ \ \ \ }
\DoxyCodeLine{00148\ \ \ \ \ \textcolor{comment}{//\ Timer\ B\ latch}}
\DoxyCodeLine{00149\ \ \ \ \ u16\ latchB;}
\DoxyCodeLine{00150\ }
\DoxyCodeLine{00151\ }
\DoxyCodeLine{00152\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00153\ \ \ \ \ \textcolor{comment}{//\ Control}}
\DoxyCodeLine{00154\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00155\ \ \ \ \ }
\DoxyCodeLine{00156\ \ \ \ \ \textcolor{comment}{//\ Action\ flags}}
\DoxyCodeLine{00157\ \ \ \ \ u64\ delay;}
\DoxyCodeLine{00158\ \ \ \ \ u64\ feed;}
\DoxyCodeLine{00159\ \ \ \ \ }
\DoxyCodeLine{00160\ \ \ \ \ \textcolor{comment}{//\ Control\ registers}}
\DoxyCodeLine{00161\ \ \ \ \ u8\ CRA;}
\DoxyCodeLine{00162\ \ \ \ \ u8\ CRB;}
\DoxyCodeLine{00163\ \ \ \ \ }
\DoxyCodeLine{00164\ \ \ \ \ \textcolor{comment}{//\ Interrupt\ control\ register}}
\DoxyCodeLine{00165\ \ \ \ \ u8\ icr;}
\DoxyCodeLine{00166\ }
\DoxyCodeLine{00167\ \ \ \ \ \textcolor{comment}{//\ ICR\ bits\ to\ be\ deleted\ when\ CIAAckIcr1\ hits}}
\DoxyCodeLine{00168\ \ \ \ \ u8\ icrAck;}
\DoxyCodeLine{00169\ }
\DoxyCodeLine{00170\ \ \ \ \ \textcolor{comment}{//\ Interrupt\ mask\ register}}
\DoxyCodeLine{00171\ \ \ \ \ u8\ imr;}
\DoxyCodeLine{00172\ }
\DoxyCodeLine{00173\ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00174\ \ \ \ \ }
\DoxyCodeLine{00175\ \ \ \ \ \textcolor{comment}{//\ Bit\ mask\ for\ PB\ outputs\ (0\ =\ port\ register,\ 1\ =\ timer)}}
\DoxyCodeLine{00176\ \ \ \ \ u8\ PB67TimerMode;}
\DoxyCodeLine{00177\ \ \ \ \ }
\DoxyCodeLine{00178\ \ \ \ \ \textcolor{comment}{//\ PB\ outputs\ bits\ 6\ and\ 7\ in\ timer\ mode}}
\DoxyCodeLine{00179\ \ \ \ \ u8\ PB67TimerOut;}
\DoxyCodeLine{00180\ \ \ \ \ }
\DoxyCodeLine{00181\ \ \ \ \ \textcolor{comment}{//\ PB\ outputs\ bits\ 6\ and\ 7\ in\ toggle\ mode}}
\DoxyCodeLine{00182\ \ \ \ \ u8\ PB67Toggle;}
\DoxyCodeLine{00183\ }
\DoxyCodeLine{00184\ \ \ \ \ }
\DoxyCodeLine{00185\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00186\ \ \ \ \ \textcolor{comment}{//\ Port\ registers}}
\DoxyCodeLine{00187\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00188\ \ \ \ \ }
\DoxyCodeLine{00189\ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00190\ \ \ \ \ }
\DoxyCodeLine{00191\ \ \ \ \ \textcolor{comment}{//\ Peripheral\ data\ registers}}
\DoxyCodeLine{00192\ \ \ \ \ u8\ PRA;}
\DoxyCodeLine{00193\ \ \ \ \ u8\ PRB;}
\DoxyCodeLine{00194\ \ \ \ \ }
\DoxyCodeLine{00195\ \ \ \ \ \textcolor{comment}{//\ Data\ directon\ registers}}
\DoxyCodeLine{00196\ \ \ \ \ u8\ DDRA;}
\DoxyCodeLine{00197\ \ \ \ \ u8\ DDRB;}
\DoxyCodeLine{00198\ \ \ \ \ }
\DoxyCodeLine{00199\ \ \ \ \ \textcolor{comment}{//\ Peripheral\ ports}}
\DoxyCodeLine{00200\ \ \ \ \ u8\ PA;}
\DoxyCodeLine{00201\ \ \ \ \ u8\ PB;}
\DoxyCodeLine{00202\ }
\DoxyCodeLine{00203\ \ \ \ \ }
\DoxyCodeLine{00204\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00205\ \ \ \ \ \textcolor{comment}{//\ Shift\ register\ logic}}
\DoxyCodeLine{00206\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00207\ \ \ \ \ }
\DoxyCodeLine{00208\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00209\ \ \ \ \ }
\DoxyCodeLine{00210\ \ \ \ \ \textcolor{comment}{/*\ Serial\ data\ register}}
\DoxyCodeLine{00211\ \textcolor{comment}{\ \ \ \ \ *\ http://unusedino.de/ec64/technical/misc/cia6526/serial.html}}
\DoxyCodeLine{00212\ \textcolor{comment}{\ \ \ \ \ *\ "{}The\ serial\ port\ is\ a\ buffered,\ 8-\/bit\ synchronous\ shift\ register\ system.}}
\DoxyCodeLine{00213\ \textcolor{comment}{\ \ \ \ \ *\ \ A\ control\ bit\ selects\ input\ or\ output\ mode.\ In\ input\ mode,\ data\ on\ the}}
\DoxyCodeLine{00214\ \textcolor{comment}{\ \ \ \ \ *\ \ SP\ pin\ is\ shifted\ into\ the\ shift\ register\ on\ the\ rising\ edge\ of\ the}}
\DoxyCodeLine{00215\ \textcolor{comment}{\ \ \ \ \ *\ \ signal\ applied\ to\ the\ CNT\ pin.\ After\ 8\ CNT\ pulses,\ the\ data\ in\ the\ shift}}
\DoxyCodeLine{00216\ \textcolor{comment}{\ \ \ \ \ *\ \ register\ is\ dumped\ into\ the\ Serial\ Data\ Register\ and\ an\ interrupt\ is}}
\DoxyCodeLine{00217\ \textcolor{comment}{\ \ \ \ \ *\ \ generated.\ In\ the\ output\ mode,\ TIMER\ A\ is\ used\ for\ the\ baud\ rate}}
\DoxyCodeLine{00218\ \textcolor{comment}{\ \ \ \ \ *\ \ generator.\ Data\ is\ shifted\ out\ on\ the\ SP\ pin\ at\ 1/2\ the\ underflow\ rate}}
\DoxyCodeLine{00219\ \textcolor{comment}{\ \ \ \ \ *\ \ of\ TIMER\ A.\ [...]\ Transmission\ will\ start\ following\ a\ write\ to\ the}}
\DoxyCodeLine{00220\ \textcolor{comment}{\ \ \ \ \ *\ \ Serial\ Data\ Register\ (provided\ TIMER\ A\ is\ running\ and\ in\ continuous}}
\DoxyCodeLine{00221\ \textcolor{comment}{\ \ \ \ \ *\ \ mode).\ The\ clock\ signal\ derived\ from\ TIMER\ A\ appears\ as\ an\ output\ on\ the}}
\DoxyCodeLine{00222\ \textcolor{comment}{\ \ \ \ \ *\ \ CNT\ pin.\ The\ data\ in\ the\ Serial\ Data\ Register\ will\ be\ loaded\ into\ the}}
\DoxyCodeLine{00223\ \textcolor{comment}{\ \ \ \ \ *\ \ shift\ register\ then\ shift\ out\ to\ the\ SP\ pin\ when\ a\ CNT\ pulse\ occurs.}}
\DoxyCodeLine{00224\ \textcolor{comment}{\ \ \ \ \ *\ \ Data\ shifted\ out\ becomes\ valid\ on\ the\ falling\ edge\ of\ CNT\ and\ remains}}
\DoxyCodeLine{00225\ \textcolor{comment}{\ \ \ \ \ *\ \ valid\ until\ the\ next\ falling\ edge.\ After\ 8\ CNT\ pulses,\ an\ interrupt\ is}}
\DoxyCodeLine{00226\ \textcolor{comment}{\ \ \ \ \ *\ \ generated\ to\ indicate\ more\ data\ can\ be\ sent.\ If\ the\ Serial\ Data\ Register}}
\DoxyCodeLine{00227\ \textcolor{comment}{\ \ \ \ \ *\ \ was\ loaded\ with\ new\ information\ prior\ to\ this\ interrupt,\ the\ new\ data}}
\DoxyCodeLine{00228\ \textcolor{comment}{\ \ \ \ \ *\ \ will\ automatically\ be\ loaded\ into\ the\ shift\ register\ and\ transmission}}
\DoxyCodeLine{00229\ \textcolor{comment}{\ \ \ \ \ *\ \ will\ continue.\ If\ the\ microprocessor\ stays\ one\ byte\ ahead\ of\ the\ shift}}
\DoxyCodeLine{00230\ \textcolor{comment}{\ \ \ \ \ *\ \ register,\ transmission\ will\ be\ continuous.\ If\ no\ further\ data\ is\ to\ be}}
\DoxyCodeLine{00231\ \textcolor{comment}{\ \ \ \ \ *\ \ transmitted,\ after\ the\ 8th\ CNT\ pulse,\ CNT\ will\ return\ high\ and\ SP\ will}}
\DoxyCodeLine{00232\ \textcolor{comment}{\ \ \ \ \ *\ \ remain\ at\ the\ level\ of\ the\ last\ data\ bit\ transmitted.\ SDR\ data\ is}}
\DoxyCodeLine{00233\ \textcolor{comment}{\ \ \ \ \ *\ \ shifted\ out\ MSB\ first\ and\ serial\ input\ data\ should\ also\ appear\ in\ this}}
\DoxyCodeLine{00234\ \textcolor{comment}{\ \ \ \ \ *\ \ format.}}
\DoxyCodeLine{00235\ \textcolor{comment}{\ \ \ \ \ */}}
\DoxyCodeLine{00236\ \ \ \ \ u8\ sdr;}
\DoxyCodeLine{00237\ \ \ \ \ }
\DoxyCodeLine{00238\ \ \ \ \ \textcolor{comment}{//\ Clock\ signal\ for\ driving\ the\ serial\ register}}
\DoxyCodeLine{00239\ \ \ \ \ \textcolor{keywordtype}{bool}\ serClk;}
\DoxyCodeLine{00240\ \ \ \ \ }
\DoxyCodeLine{00241\ \ \ \ \ \textcolor{comment}{/*\ Shift\ register\ counter}}
\DoxyCodeLine{00242\ \textcolor{comment}{\ \ \ \ \ *\ The\ counter\ is\ set\ to\ 8\ when\ the\ shift\ register\ is\ loaded\ and\ decremented}}
\DoxyCodeLine{00243\ \textcolor{comment}{\ \ \ \ \ *\ when\ a\ bit\ is\ shifted\ out.}}
\DoxyCodeLine{00244\ \textcolor{comment}{\ \ \ \ \ */}}
\DoxyCodeLine{00245\ \ \ \ \ u8\ serCounter;}
\DoxyCodeLine{00246\ \ \ \ \ }
\DoxyCodeLine{00247\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00248\ \ \ \ \ \textcolor{comment}{//\ Port\ pins}}
\DoxyCodeLine{00249\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00250\ }
\DoxyCodeLine{00251\ \ \ \ \ \textcolor{keywordtype}{bool}\ CNT;}
\DoxyCodeLine{00252\ \ \ \ \ \textcolor{keywordtype}{bool}\ INT;}
\DoxyCodeLine{00253\ }
\DoxyCodeLine{00254\ }
\DoxyCodeLine{00255\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00256\ \ \ \ \ \textcolor{comment}{//\ Sleep\ logic}}
\DoxyCodeLine{00257\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00258\ \ \ \ \ }
\DoxyCodeLine{00259\ \ \ \ \ \textcolor{comment}{/*\ Idle\ counter.\ When\ the\ CIA's\ state\ does\ not\ change\ during\ execution,}}
\DoxyCodeLine{00260\ \textcolor{comment}{\ \ \ \ \ *\ this\ variable\ is\ increased\ by\ one.\ If\ it\ exceeds\ a\ certain\ threshhold,}}
\DoxyCodeLine{00261\ \textcolor{comment}{\ \ \ \ \ *\ the\ chip\ is\ put\ into\ idle\ state\ via\ sleep().}}
\DoxyCodeLine{00262\ \textcolor{comment}{\ \ \ \ \ */}}
\DoxyCodeLine{00263\ \ \ \ \ u8\ tiredness;}
\DoxyCodeLine{00264\ }
\DoxyCodeLine{00265\ \ \ \ \ \textcolor{comment}{//\ Total\ number\ of\ skipped\ cycles\ (used\ by\ the\ debugger,\ only)}}
\DoxyCodeLine{00266\ \ \ \ \ Cycle\ idleCycles;}
\DoxyCodeLine{00267\ }
\DoxyCodeLine{00268\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00269\ \ \ \ \ }
\DoxyCodeLine{00270\ \ \ \ \ \textcolor{comment}{//\ Indicates\ if\ the\ CIA\ is\ currently\ idle}}
\DoxyCodeLine{00271\ \ \ \ \ \textcolor{keywordtype}{bool}\ sleeping;}
\DoxyCodeLine{00272\ \ \ \ \ }
\DoxyCodeLine{00273\ \ \ \ \ \textcolor{comment}{/*\ The\ last\ executed\ cycle\ before\ the\ chip\ went\ idle}}
\DoxyCodeLine{00274\ \textcolor{comment}{\ \ \ \ \ *\ The\ variable\ is\ set\ in\ sleep()}}
\DoxyCodeLine{00275\ \textcolor{comment}{\ \ \ \ \ */}}
\DoxyCodeLine{00276\ \ \ \ \ Cycle\ sleepCycle;}
\DoxyCodeLine{00277\ \ \ \ \ }
\DoxyCodeLine{00278\ \ \ \ \ \textcolor{comment}{/*\ The\ first\ cycle\ to\ be\ executed\ after\ the\ chip\ went\ idle}}
\DoxyCodeLine{00279\ \textcolor{comment}{\ \ \ \ \ *\ The\ variable\ is\ set\ in\ sleep()}}
\DoxyCodeLine{00280\ \textcolor{comment}{\ \ \ \ \ */}}
\DoxyCodeLine{00281\ \ \ \ \ Cycle\ wakeUpCycle;}
\DoxyCodeLine{00282\ \ \ \ \ }
\DoxyCodeLine{00283\ \ \ \ \ }
\DoxyCodeLine{00284\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00285\ \ \ \ \ \textcolor{comment}{//\ Initializing}}
\DoxyCodeLine{00286\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00287\ \ \ \ \ }
\DoxyCodeLine{00288\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00289\ \ \ \ \ }
\DoxyCodeLine{00290\ \ \ \ \ CIA(C64\ \&ref);}
\DoxyCodeLine{00291\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ isCIA1()\ \textcolor{keyword}{const}\ =\ 0;}
\DoxyCodeLine{00292\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ isCIA2()\ \textcolor{keyword}{const}\ =\ 0;}
\DoxyCodeLine{00293\ }
\DoxyCodeLine{00294\ \ \ \ \ }
\DoxyCodeLine{00295\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00296\ \ \ \ \ \textcolor{comment}{//\ Methods\ from\ CoreObject}}
\DoxyCodeLine{00297\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00298\ }
\DoxyCodeLine{00299\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00300\ \ \ \ \ }
\DoxyCodeLine{00301\ \ \ \ \ \textcolor{keywordtype}{void}\ \_dump(Category\ category,\ std::ostream\&\ os)\ \textcolor{keyword}{const\ override};}
\DoxyCodeLine{00302\ }
\DoxyCodeLine{00303\ \ \ \ \ }
\DoxyCodeLine{00304\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00305\ \ \ \ \ \textcolor{comment}{//\ Methods\ from\ CoreComponent}}
\DoxyCodeLine{00306\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00307\ }
\DoxyCodeLine{00308\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00309\ \ \ \ \ }
\DoxyCodeLine{00310\ \ \ \ \ CIA\&\ operator=\ (\textcolor{keyword}{const}\ CIA\&\ other)\ \{}
\DoxyCodeLine{00311\ }
\DoxyCodeLine{00312\ \ \ \ \ \ \ \ \ CLONE(tod)}
\DoxyCodeLine{00313\ }
\DoxyCodeLine{00314\ \ \ \ \ \ \ \ \ CLONE(counterA)}
\DoxyCodeLine{00315\ \ \ \ \ \ \ \ \ CLONE(counterB)}
\DoxyCodeLine{00316\ \ \ \ \ \ \ \ \ CLONE(latchA)}
\DoxyCodeLine{00317\ \ \ \ \ \ \ \ \ CLONE(latchB)}
\DoxyCodeLine{00318\ \ \ \ \ \ \ \ \ CLONE(delay)}
\DoxyCodeLine{00319\ \ \ \ \ \ \ \ \ CLONE(feed)}
\DoxyCodeLine{00320\ \ \ \ \ \ \ \ \ CLONE(CRA)}
\DoxyCodeLine{00321\ \ \ \ \ \ \ \ \ CLONE(CRB)}
\DoxyCodeLine{00322\ \ \ \ \ \ \ \ \ CLONE(icr)}
\DoxyCodeLine{00323\ \ \ \ \ \ \ \ \ CLONE(icrAck)}
\DoxyCodeLine{00324\ \ \ \ \ \ \ \ \ CLONE(imr)}
\DoxyCodeLine{00325\ \ \ \ \ \ \ \ \ CLONE(PB67TimerMode)}
\DoxyCodeLine{00326\ \ \ \ \ \ \ \ \ CLONE(PB67TimerOut)}
\DoxyCodeLine{00327\ \ \ \ \ \ \ \ \ CLONE(PB67Toggle)}
\DoxyCodeLine{00328\ \ \ \ \ \ \ \ \ CLONE(PRA)}
\DoxyCodeLine{00329\ \ \ \ \ \ \ \ \ CLONE(PRB)}
\DoxyCodeLine{00330\ \ \ \ \ \ \ \ \ CLONE(DDRA)}
\DoxyCodeLine{00331\ \ \ \ \ \ \ \ \ CLONE(DDRB)}
\DoxyCodeLine{00332\ \ \ \ \ \ \ \ \ CLONE(PA)}
\DoxyCodeLine{00333\ \ \ \ \ \ \ \ \ CLONE(PB)}
\DoxyCodeLine{00334\ \ \ \ \ \ \ \ \ CLONE(sdr)}
\DoxyCodeLine{00335\ \ \ \ \ \ \ \ \ CLONE(serClk)}
\DoxyCodeLine{00336\ \ \ \ \ \ \ \ \ CLONE(serCounter)}
\DoxyCodeLine{00337\ \ \ \ \ \ \ \ \ CLONE(CNT)}
\DoxyCodeLine{00338\ \ \ \ \ \ \ \ \ CLONE(INT)}
\DoxyCodeLine{00339\ \ \ \ \ \ \ \ \ CLONE(tiredness)}
\DoxyCodeLine{00340\ \ \ \ \ \ \ \ \ CLONE(idleCycles)}
\DoxyCodeLine{00341\ \ \ \ \ \ \ \ \ CLONE(sleeping)}
\DoxyCodeLine{00342\ \ \ \ \ \ \ \ \ CLONE(sleepCycle)}
\DoxyCodeLine{00343\ \ \ \ \ \ \ \ \ CLONE(wakeUpCycle)}
\DoxyCodeLine{00344\ }
\DoxyCodeLine{00345\ \ \ \ \ \ \ \ \ CLONE(config)}
\DoxyCodeLine{00346\ }
\DoxyCodeLine{00347\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00348\ \ \ \ \ \}}
\DoxyCodeLine{00349\ }
\DoxyCodeLine{00350\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{class}\ T>}
\DoxyCodeLine{00351\ \ \ \ \ \textcolor{keywordtype}{void}\ serialize(T\&\ worker)}
\DoxyCodeLine{00352\ \ \ \ \ \{}
\DoxyCodeLine{00353\ \ \ \ \ \ \ \ \ worker}
\DoxyCodeLine{00354\ }
\DoxyCodeLine{00355\ \ \ \ \ \ \ \ \ <<\ tod}
\DoxyCodeLine{00356\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00357\ \ \ \ \ \ \ \ \ <<\ counterA}
\DoxyCodeLine{00358\ \ \ \ \ \ \ \ \ <<\ counterB}
\DoxyCodeLine{00359\ \ \ \ \ \ \ \ \ <<\ latchA}
\DoxyCodeLine{00360\ \ \ \ \ \ \ \ \ <<\ latchB}
\DoxyCodeLine{00361\ \ \ \ \ \ \ \ \ <<\ delay}
\DoxyCodeLine{00362\ \ \ \ \ \ \ \ \ <<\ feed}
\DoxyCodeLine{00363\ \ \ \ \ \ \ \ \ <<\ CRA}
\DoxyCodeLine{00364\ \ \ \ \ \ \ \ \ <<\ CRB}
\DoxyCodeLine{00365\ \ \ \ \ \ \ \ \ <<\ icr}
\DoxyCodeLine{00366\ \ \ \ \ \ \ \ \ <<\ icrAck}
\DoxyCodeLine{00367\ \ \ \ \ \ \ \ \ <<\ imr}
\DoxyCodeLine{00368\ \ \ \ \ \ \ \ \ <<\ PB67TimerMode}
\DoxyCodeLine{00369\ \ \ \ \ \ \ \ \ <<\ PB67TimerOut}
\DoxyCodeLine{00370\ \ \ \ \ \ \ \ \ <<\ PB67Toggle}
\DoxyCodeLine{00371\ \ \ \ \ \ \ \ \ <<\ PRA}
\DoxyCodeLine{00372\ \ \ \ \ \ \ \ \ <<\ PRB}
\DoxyCodeLine{00373\ \ \ \ \ \ \ \ \ <<\ DDRA}
\DoxyCodeLine{00374\ \ \ \ \ \ \ \ \ <<\ DDRB}
\DoxyCodeLine{00375\ \ \ \ \ \ \ \ \ <<\ PA}
\DoxyCodeLine{00376\ \ \ \ \ \ \ \ \ <<\ PB}
\DoxyCodeLine{00377\ \ \ \ \ \ \ \ \ <<\ sdr}
\DoxyCodeLine{00378\ \ \ \ \ \ \ \ \ <<\ serClk}
\DoxyCodeLine{00379\ \ \ \ \ \ \ \ \ <<\ serCounter}
\DoxyCodeLine{00380\ \ \ \ \ \ \ \ \ <<\ CNT}
\DoxyCodeLine{00381\ \ \ \ \ \ \ \ \ <<\ INT}
\DoxyCodeLine{00382\ \ \ \ \ \ \ \ \ <<\ tiredness}
\DoxyCodeLine{00383\ \ \ \ \ \ \ \ \ <<\ idleCycles}
\DoxyCodeLine{00384\ \ \ \ \ \ \ \ \ <<\ sleeping}
\DoxyCodeLine{00385\ \ \ \ \ \ \ \ \ <<\ sleepCycle}
\DoxyCodeLine{00386\ \ \ \ \ \ \ \ \ <<\ wakeUpCycle;}
\DoxyCodeLine{00387\ }
\DoxyCodeLine{00388\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (isResetter(worker))\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00389\ }
\DoxyCodeLine{00390\ \ \ \ \ \ \ \ \ worker}
\DoxyCodeLine{00391\ }
\DoxyCodeLine{00392\ \ \ \ \ \ \ \ \ <<\ config.revision}
\DoxyCodeLine{00393\ \ \ \ \ \ \ \ \ <<\ config.timerBBug;}
\DoxyCodeLine{00394\ }
\DoxyCodeLine{00395\ \ \ \ \ \}\ SERIALIZERS(serialize);}
\DoxyCodeLine{00396\ }
\DoxyCodeLine{00397\ \ \ \ \ \textcolor{keywordtype}{void}\ \_reset(\textcolor{keywordtype}{bool}\ hard)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00398\ }
\DoxyCodeLine{00399\ }
\DoxyCodeLine{00400\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00401\ \ \ \ \ \textcolor{comment}{//\ Methods\ from\ Inspectable}}
\DoxyCodeLine{00402\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00403\ }
\DoxyCodeLine{00404\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00405\ \ \ \ \ }
\DoxyCodeLine{00406\ \ \ \ \ \textcolor{keywordtype}{bool}\ autoInspect()\ \textcolor{keyword}{const\ override};}
\DoxyCodeLine{00407\ \ \ \ \ \textcolor{keywordtype}{void}\ recordState(CIAInfo\ \&result)\ \textcolor{keyword}{const\ override};}
\DoxyCodeLine{00408\ \ \ \ \ \textcolor{keywordtype}{void}\ recordStats(CIAStats\ \&result)\ \textcolor{keyword}{const\ override};}
\DoxyCodeLine{00409\ }
\DoxyCodeLine{00410\ }
\DoxyCodeLine{00411\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00412\ \ \ \ \ \textcolor{comment}{//\ Configuring}}
\DoxyCodeLine{00413\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00414\ }
\DoxyCodeLine{00415\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00416\ }
\DoxyCodeLine{00417\ \ \ \ \ \textcolor{keyword}{const}\ CIAConfig\ \&getConfig()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ config;\ \}}
\DoxyCodeLine{00418\ \ \ \ \ \textcolor{keyword}{const}\ ConfigOptions\ \&getOptions()\textcolor{keyword}{\ const\ override\ }\{\ \textcolor{keywordflow}{return}\ options;\ \}}
\DoxyCodeLine{00419\ \ \ \ \ i64\ getOption(\mbox{\hyperlink{_option_types_8h_a273e435dabd576e6dcff3f18024d1fa8}{Option}}\ opt)\ \textcolor{keyword}{const\ override};}
\DoxyCodeLine{00420\ \ \ \ \ \textcolor{keywordtype}{void}\ setOption(\mbox{\hyperlink{_option_types_8h_a273e435dabd576e6dcff3f18024d1fa8}{Option}}\ opt,\ i64\ value)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00421\ }
\DoxyCodeLine{00422\ }
\DoxyCodeLine{00423\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00424\ \ \ \ \ \textcolor{comment}{//\ Accessing\ the\ I/O\ register\ space}}
\DoxyCodeLine{00425\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00426\ }
\DoxyCodeLine{00427\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00428\ \ \ \ \ }
\DoxyCodeLine{00429\ \ \ \ \ \textcolor{comment}{//\ Reads\ a\ value\ from\ a\ CIA\ register}}
\DoxyCodeLine{00430\ \ \ \ \ u8\ peek(u16\ addr);}
\DoxyCodeLine{00431\ \ \ \ \ }
\DoxyCodeLine{00432\ \ \ \ \ \textcolor{comment}{//\ Reads\ a\ value\ from\ a\ CIA\ register\ without\ causing\ side\ effects}}
\DoxyCodeLine{00433\ \ \ \ \ u8\ spypeek(u16\ addr)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00434\ }
\DoxyCodeLine{00435\ \ \ \ \ \textcolor{comment}{//\ Writes\ a\ value\ into\ a\ CIA\ register}}
\DoxyCodeLine{00436\ \ \ \ \ \textcolor{keywordtype}{void}\ poke(u16\ addr,\ u8\ value);}
\DoxyCodeLine{00437\ \ \ \ \ }
\DoxyCodeLine{00438\ \ \ \ \ }
\DoxyCodeLine{00439\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00440\ \ \ \ \ \textcolor{comment}{//\ Accessing\ the\ port\ registers}}
\DoxyCodeLine{00441\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00442\ \ \ \ \ }
\DoxyCodeLine{00443\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00444\ \ \ \ \ }
\DoxyCodeLine{00445\ \ \ \ \ \textcolor{comment}{//\ Returns\ the\ data\ registers\ (call\ updatePA()\ or\ updatePB()\ first)}}
\DoxyCodeLine{00446\ \ \ \ \ u8\ getPA()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ PA;\ \}}
\DoxyCodeLine{00447\ \ \ \ \ u8\ getPB()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ PB;\ \}}
\DoxyCodeLine{00448\ }
\DoxyCodeLine{00449\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00450\ \ \ \ \ }
\DoxyCodeLine{00451\ \ \ \ \ \textcolor{comment}{//\ Returns\ the\ data\ direction\ register}}
\DoxyCodeLine{00452\ \ \ \ \ u8\ getDDRA()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ DDRA;\ \}}
\DoxyCodeLine{00453\ \ \ \ \ u8\ getDDRB()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ DDRB;\ \}}
\DoxyCodeLine{00454\ \ \ \ \ }
\DoxyCodeLine{00455\ \ \ \ \ \textcolor{comment}{//\ Computes\ the\ value\ we\ currently\ see\ at\ port\ A}}
\DoxyCodeLine{00456\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ updatePA()\ =\ 0;}
\DoxyCodeLine{00457\ \ \ \ \ \textcolor{keyword}{virtual}\ u8\ computePA()\ \textcolor{keyword}{const}\ =\ 0;}
\DoxyCodeLine{00458\ \ \ \ \ }
\DoxyCodeLine{00459\ \ \ \ \ \textcolor{comment}{//\ Returns\ the\ value\ driving\ port\ A\ from\ inside\ the\ chip}}
\DoxyCodeLine{00460\ \ \ \ \ \textcolor{keyword}{virtual}\ u8\ portAinternal()\ \textcolor{keyword}{const}\ =\ 0;}
\DoxyCodeLine{00461\ \ \ \ \ }
\DoxyCodeLine{00462\ \ \ \ \ \textcolor{comment}{//\ Returns\ the\ value\ driving\ port\ A\ from\ outside\ the\ chip}}
\DoxyCodeLine{00463\ \ \ \ \ \textcolor{keyword}{virtual}\ u8\ portAexternal()\ \textcolor{keyword}{const}\ =\ 0;}
\DoxyCodeLine{00464\ \ \ \ \ }
\DoxyCodeLine{00465\ \ \ \ \ \textcolor{comment}{//\ Computes\ the\ value\ we\ currently\ see\ at\ port\ B}}
\DoxyCodeLine{00466\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ updatePB()\ =\ 0;}
\DoxyCodeLine{00467\ \ \ \ \ \textcolor{keyword}{virtual}\ u8\ computePB()\ \textcolor{keyword}{const}\ =\ 0;}
\DoxyCodeLine{00468\ \ \ \ \ }
\DoxyCodeLine{00469\ \ \ \ \ \textcolor{comment}{//\ Returns\ the\ value\ driving\ port\ B\ from\ inside\ the\ chip}}
\DoxyCodeLine{00470\ \ \ \ \ \textcolor{keyword}{virtual}\ u8\ portBinternal()\ \textcolor{keyword}{const}\ =\ 0;}
\DoxyCodeLine{00471\ \ \ \ \ }
\DoxyCodeLine{00472\ \ \ \ \ \textcolor{comment}{//\ Returns\ the\ value\ \ driving\ port\ B\ from\ outside\ the\ chip}}
\DoxyCodeLine{00473\ \ \ \ \ \textcolor{keyword}{virtual}\ u8\ portBexternal()\ \textcolor{keyword}{const}\ =\ 0;}
\DoxyCodeLine{00474\ \ \ \ \ }
\DoxyCodeLine{00475\ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00476\ }
\DoxyCodeLine{00477\ \ \ \ \ \textcolor{comment}{//\ Action\ method\ for\ peeking\ the\ port\ registers}}
\DoxyCodeLine{00478\ \ \ \ \ \textcolor{keyword}{virtual}\ u8\ peekPA()\ \{\ updatePA();\ \textcolor{keywordflow}{return}\ PA;\ \}}
\DoxyCodeLine{00479\ \ \ \ \ \textcolor{keyword}{virtual}\ u8\ peekPB()\ \{\ updatePB();\ \textcolor{keywordflow}{return}\ PB;\ \}}
\DoxyCodeLine{00480\ }
\DoxyCodeLine{00481\ \ \ \ \ \textcolor{comment}{//\ Action\ method\ for\ poking\ the\ port\ registers}}
\DoxyCodeLine{00482\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ pokePRA(u8\ value)\ \{\ PRA\ =\ value;\ updatePA();\ \}}
\DoxyCodeLine{00483\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ pokePRB(u8\ value)\ \{\ PRB\ =\ value;\ updatePB();\ \}}
\DoxyCodeLine{00484\ }
\DoxyCodeLine{00485\ \ \ \ \ \textcolor{comment}{//\ Action\ method\ for\ poking\ the\ port\ direction\ registers}}
\DoxyCodeLine{00486\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ pokeDDRA(u8\ value)\ \{\ DDRA\ =\ value;\ updatePA();\ \}}
\DoxyCodeLine{00487\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ pokeDDRB(u8\ value)\ \{\ DDRB\ =\ value;\ updatePB();\ \}}
\DoxyCodeLine{00488\ }
\DoxyCodeLine{00489\ \ \ \ \ }
\DoxyCodeLine{00490\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00491\ \ \ \ \ \textcolor{comment}{//\ Accessing\ the\ port\ pins}}
\DoxyCodeLine{00492\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00493\ \ \ \ \ }
\DoxyCodeLine{00494\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00495\ \ \ \ \ }
\DoxyCodeLine{00496\ \ \ \ \ \textcolor{comment}{//\ Simulates\ an\ edge\ on\ the\ flag\ pin}}
\DoxyCodeLine{00497\ \ \ \ \ \textcolor{keywordtype}{void}\ triggerRisingEdgeOnFlagPin();}
\DoxyCodeLine{00498\ \ \ \ \ \textcolor{keywordtype}{void}\ triggerFallingEdgeOnFlagPin();}
\DoxyCodeLine{00499\ \ \ \ \ }
\DoxyCodeLine{00500\ \ \ \ \ \textcolor{comment}{//\ Emulates\ a\ pulse\ on\ the\ PC\ pin}}
\DoxyCodeLine{00501\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ pulsePC()\ \{\ \};}
\DoxyCodeLine{00502\ }
\DoxyCodeLine{00503\ \ \ \ \ }
\DoxyCodeLine{00504\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00505\ \ \ \ \ \textcolor{comment}{//\ Handling\ interrupts}}
\DoxyCodeLine{00506\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00507\ \ \ \ \ }
\DoxyCodeLine{00508\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00509\ }
\DoxyCodeLine{00510\ \ \ \ \ \textcolor{comment}{//\ Requests\ the\ CPU\ to\ interrupt}}
\DoxyCodeLine{00511\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ pullDownInterruptLine()\ =\ 0;}
\DoxyCodeLine{00512\ \ \ \ \ }
\DoxyCodeLine{00513\ \ \ \ \ \textcolor{comment}{//\ Removes\ the\ interrupt\ requests}}
\DoxyCodeLine{00514\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ releaseInterruptLine()\ =\ 0;}
\DoxyCodeLine{00515\ \ \ \ \ }
\DoxyCodeLine{00516\ \ \ \ \ \textcolor{comment}{//\ Loads\ a\ latched\ value\ into\ timer}}
\DoxyCodeLine{00517\ \ \ \ \ \textcolor{keywordtype}{void}\ reloadTimerA(u64\ *delay);}
\DoxyCodeLine{00518\ \ \ \ \ \textcolor{keywordtype}{void}\ reloadTimerB(u64\ *delay);}
\DoxyCodeLine{00519\ \ \ \ \ }
\DoxyCodeLine{00520\ \ \ \ \ \textcolor{comment}{//\ Triggers\ an\ interrupt\ (invoked\ inside\ execute())}}
\DoxyCodeLine{00521\ \ \ \ \ \textcolor{keywordtype}{void}\ triggerTimerIrq(u64\ *delay);}
\DoxyCodeLine{00522\ \ \ \ \ \textcolor{keywordtype}{void}\ triggerTodIrq(u64\ *delay);}
\DoxyCodeLine{00523\ \ \ \ \ \textcolor{keywordtype}{void}\ triggerSerialIrq(u64\ *delay);}
\DoxyCodeLine{00524\ \ \ \ \ }
\DoxyCodeLine{00525\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00526\ \ \ \ \ }
\DoxyCodeLine{00527\ \ \ \ \ \textcolor{comment}{//\ Handles\ an\ interrupt\ request\ from\ TOD}}
\DoxyCodeLine{00528\ \ \ \ \ \textcolor{keywordtype}{void}\ todInterrupt();}
\DoxyCodeLine{00529\ \ \ \ \ }
\DoxyCodeLine{00530\ }
\DoxyCodeLine{00531\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00532\ \ \ \ \ \textcolor{comment}{//\ Handling\ events}}
\DoxyCodeLine{00533\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00534\ }
\DoxyCodeLine{00535\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00536\ }
\DoxyCodeLine{00537\ \ \ \ \ \textcolor{comment}{//\ Services\ an\ event\ in\ the\ CIA\ slot}}
\DoxyCodeLine{00538\ \ \ \ \ \textcolor{keywordtype}{void}\ serviceEvent(EventID\ \textcolor{keywordtype}{id});}
\DoxyCodeLine{00539\ }
\DoxyCodeLine{00540\ \ \ \ \ \textcolor{comment}{//\ Schedules\ the\ next\ execution\ event}}
\DoxyCodeLine{00541\ \ \ \ \ \textcolor{keywordtype}{void}\ scheduleNextExecution();}
\DoxyCodeLine{00542\ }
\DoxyCodeLine{00543\ \ \ \ \ \textcolor{comment}{//\ Schedules\ the\ next\ wakeup\ event}}
\DoxyCodeLine{00544\ \ \ \ \ \textcolor{keywordtype}{void}\ scheduleWakeUp();}
\DoxyCodeLine{00545\ }
\DoxyCodeLine{00546\ }
\DoxyCodeLine{00547\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00548\ \ \ \ \ \textcolor{comment}{//\ Executing}}
\DoxyCodeLine{00549\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00550\ \ \ \ \ }
\DoxyCodeLine{00551\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00552\ \ \ \ \ }
\DoxyCodeLine{00553\ \ \ \ \ \textcolor{comment}{//\ Executes\ the\ CIA\ for\ one\ cycle}}
\DoxyCodeLine{00554\ \ \ \ \ \textcolor{keywordtype}{void}\ executeOneCycle();}
\DoxyCodeLine{00555\ }
\DoxyCodeLine{00556\ \ \ \ \ }
\DoxyCodeLine{00557\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00558\ \ \ \ \ \textcolor{comment}{//\ Speeding\ up\ (sleep\ logic)}}
\DoxyCodeLine{00559\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00560\ \ \ \ \ }
\DoxyCodeLine{00561\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00562\ \ \ \ \ }
\DoxyCodeLine{00563\ \ \ \ \ \textcolor{comment}{//\ Puts\ the\ CIA\ into\ idle\ state}}
\DoxyCodeLine{00564\ \ \ \ \ \textcolor{keywordtype}{void}\ sleep();}
\DoxyCodeLine{00565\ \ \ \ \ }
\DoxyCodeLine{00566\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00567\ }
\DoxyCodeLine{00568\ \ \ \ \ \textcolor{comment}{//\ Emulates\ all\ previously\ skipped\ cycles}}
\DoxyCodeLine{00569\ \ \ \ \ \textcolor{keywordtype}{void}\ wakeUp();}
\DoxyCodeLine{00570\ \ \ \ \ }
\DoxyCodeLine{00571\ \ \ \ \ \textcolor{comment}{//\ Returns\ true\ if\ the\ CIA\ is\ in\ idle\ state}}
\DoxyCodeLine{00572\ \ \ \ \ \textcolor{keywordtype}{bool}\ isSleeping()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ sleeping;\ \}}
\DoxyCodeLine{00573\ \ \ \ \ }
\DoxyCodeLine{00574\ \ \ \ \ \textcolor{comment}{//\ Returns\ true\ if\ the\ CIA\ is\ awake}}
\DoxyCodeLine{00575\ \ \ \ \ \textcolor{keywordtype}{bool}\ isAwake()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ !sleeping;\ \}}
\DoxyCodeLine{00576\ \ \ \ \ }
\DoxyCodeLine{00577\ \ \ \ \ \textcolor{comment}{//\ The\ CIA\ is\ idle\ since\ this\ number\ of\ cycles}}
\DoxyCodeLine{00578\ \ \ \ \ Cycle\ idleSince()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00579\ \ \ \ \ }
\DoxyCodeLine{00580\ \ \ \ \ \textcolor{comment}{//\ Total\ number\ of\ cycles\ the\ CIA\ was\ idle}}
\DoxyCodeLine{00581\ \ \ \ \ Cycle\ idleTotal()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ idleCycles;\ \}}
\DoxyCodeLine{00582\ \};}
\DoxyCodeLine{00583\ }
\DoxyCodeLine{00584\ }
\DoxyCodeLine{00585\ \textcolor{comment}{//}}
\DoxyCodeLine{00586\ \textcolor{comment}{//\ CIA1}}
\DoxyCodeLine{00587\ \textcolor{comment}{//}}
\DoxyCodeLine{00588\ }
\DoxyCodeLine{00589\ \textcolor{keyword}{class\ }CIA1\ final\ :\ \textcolor{keyword}{public}\ CIA\ \{}
\DoxyCodeLine{00590\ }
\DoxyCodeLine{00591\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00592\ }
\DoxyCodeLine{00593\ \ \ \ \ CIA1(C64\ \&ref)\ :\ CIA(ref)\ \{\ \};}
\DoxyCodeLine{00594\ \ \ \ \ \textcolor{keywordtype}{bool}\ isCIA1()\textcolor{keyword}{\ const\ override\ }\{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};\ \}}
\DoxyCodeLine{00595\ \ \ \ \ \textcolor{keywordtype}{bool}\ isCIA2()\textcolor{keyword}{\ const\ override\ }\{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};\ \}}
\DoxyCodeLine{00596\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *getDescription()\textcolor{keyword}{\ const\ override\ }\{\ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}CIA1"{}};\ \}}
\DoxyCodeLine{00597\ \ \ \ \ }
\DoxyCodeLine{00598\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00599\ }
\DoxyCodeLine{00600\ \ \ \ \ \textcolor{keywordtype}{void}\ pullDownInterruptLine()\ \textcolor{keyword}{override};}
\DoxyCodeLine{00601\ \ \ \ \ \textcolor{keywordtype}{void}\ releaseInterruptLine()\ \textcolor{keyword}{override};}
\DoxyCodeLine{00602\ \ \ \ \ }
\DoxyCodeLine{00603\ \ \ \ \ u8\ portAinternal()\ \textcolor{keyword}{const\ override};}
\DoxyCodeLine{00604\ \ \ \ \ u8\ portAexternal()\ \textcolor{keyword}{const\ override};}
\DoxyCodeLine{00605\ \ \ \ \ \textcolor{keywordtype}{void}\ updatePA()\ \textcolor{keyword}{override};}
\DoxyCodeLine{00606\ \ \ \ \ u8\ computePA()\ \textcolor{keyword}{const\ override};}
\DoxyCodeLine{00607\ \ \ \ \ }
\DoxyCodeLine{00608\ \ \ \ \ u8\ portBinternal()\ \textcolor{keyword}{const\ override};}
\DoxyCodeLine{00609\ \ \ \ \ u8\ portBexternal()\ \textcolor{keyword}{const\ override};}
\DoxyCodeLine{00610\ \ \ \ \ \textcolor{keywordtype}{void}\ updatePB()\ \textcolor{keyword}{override};}
\DoxyCodeLine{00611\ \ \ \ \ u8\ computePB()\ \textcolor{keyword}{const\ override};}
\DoxyCodeLine{00612\ \};}
\DoxyCodeLine{00613\ }
\DoxyCodeLine{00614\ }
\DoxyCodeLine{00615\ \textcolor{comment}{//}}
\DoxyCodeLine{00616\ \textcolor{comment}{//\ CIA2}}
\DoxyCodeLine{00617\ \textcolor{comment}{//}}
\DoxyCodeLine{00618\ }
\DoxyCodeLine{00619\ \textcolor{keyword}{class\ }CIA2\ final\ :\ \textcolor{keyword}{public}\ CIA\ \{}
\DoxyCodeLine{00620\ }
\DoxyCodeLine{00621\ \ \ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }ParCable;}
\DoxyCodeLine{00622\ \ \ \ \ }
\DoxyCodeLine{00623\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00624\ }
\DoxyCodeLine{00625\ \ \ \ \ CIA2(C64\ \&ref)\ :\ CIA(ref)\ \{\ \};}
\DoxyCodeLine{00626\ \ \ \ \ \textcolor{keywordtype}{bool}\ isCIA1()\textcolor{keyword}{\ const\ override\ }\{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};\ \}}
\DoxyCodeLine{00627\ \ \ \ \ \textcolor{keywordtype}{bool}\ isCIA2()\textcolor{keyword}{\ const\ override\ }\{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};\ \}}
\DoxyCodeLine{00628\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *getDescription()\textcolor{keyword}{\ const\ override\ }\{\ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}CIA2"{}};\ \}}
\DoxyCodeLine{00629\ }
\DoxyCodeLine{00630\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00631\ }
\DoxyCodeLine{00632\ \ \ \ \ \textcolor{keywordtype}{void}\ pullDownInterruptLine()\ \textcolor{keyword}{override};}
\DoxyCodeLine{00633\ \ \ \ \ \textcolor{keywordtype}{void}\ releaseInterruptLine()\ \textcolor{keyword}{override};}
\DoxyCodeLine{00634\ \ \ \ \ }
\DoxyCodeLine{00635\ \ \ \ \ u8\ portAinternal()\ \textcolor{keyword}{const\ override};}
\DoxyCodeLine{00636\ \ \ \ \ u8\ portAexternal()\ \textcolor{keyword}{const\ override};}
\DoxyCodeLine{00637\ \ \ \ \ }
\DoxyCodeLine{00638\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00639\ \ \ \ \ }
\DoxyCodeLine{00640\ \ \ \ \ \textcolor{keywordtype}{void}\ updatePA()\ \textcolor{keyword}{override};}
\DoxyCodeLine{00641\ \ \ \ \ u8\ computePA()\ \textcolor{keyword}{const\ override};}
\DoxyCodeLine{00642\ \ \ \ \ }
\DoxyCodeLine{00643\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00644\ \ \ \ \ }
\DoxyCodeLine{00645\ \ \ \ \ u8\ portBinternal()\ \textcolor{keyword}{const\ override};}
\DoxyCodeLine{00646\ \ \ \ \ u8\ portBexternal()\ \textcolor{keyword}{const\ override};}
\DoxyCodeLine{00647\ \ \ \ \ \textcolor{keywordtype}{void}\ updatePB()\ \textcolor{keyword}{override};}
\DoxyCodeLine{00648\ \ \ \ \ u8\ computePB()\ \textcolor{keyword}{const\ override};}
\DoxyCodeLine{00649\ \ \ \ \ \textcolor{keywordtype}{void}\ pokePRA(u8\ value)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00650\ \ \ \ \ \textcolor{keywordtype}{void}\ pokePRB(u8\ value)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00651\ \ \ \ \ \textcolor{keywordtype}{void}\ pokeDDRA(u8\ value)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00652\ \ \ \ \ \textcolor{keywordtype}{void}\ pulsePC()\ \textcolor{keyword}{override};}
\DoxyCodeLine{00653\ \};}
\DoxyCodeLine{00654\ }
\DoxyCodeLine{00655\ \}}

\end{DoxyCode}
